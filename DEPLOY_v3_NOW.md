# üöÄ DEPLOY v3 - –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ù–∞—à–ª–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏–ª–∏ –ì–õ–ê–í–ù–£–Æ –û–®–ò–ë–ö–£!**

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
```python
URL: https://www.ozon.ru/search/?text=1066650955
–†–µ–∑—É–ª—å—Ç–∞—Ç: HTTP 403 Forbidden (–≤—Å–µ–≥–¥–∞!)
```

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
```python
URL: https://www.ozon.ru/product/1066650955/
–†–µ–∑—É–ª—å—Ç–∞—Ç: HTTP 200 OK
```

**–ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- `/search/` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞, –∂–µ—Å—Ç–∫–æ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –±–æ—Ç–æ–≤
- `/product/` - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä, –º–µ–Ω—å—à–µ –∑–∞—â–∏—Ç—ã

---

## –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

```bash
./redeploy.sh
```

–∏–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
docker-compose -f docker-compose.prod.yml down
docker-compose -f docker-compose.prod.yml build --no-cache
docker-compose -f docker-compose.prod.yml up -d
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞—Ä—Ç–∏–∫—É–ª —á–µ—Ä–µ–∑ –±–æ—Ç–∞:
```
1066650955
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
```bash
docker-compose -f docker-compose.prod.yml logs -f backend | grep 1066650955
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
üåê Scraping 1066650955 via Playwright: https://www.ozon.ru/product/1066650955/
‚úÖ Page loaded, found selector: h1
‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ
üí∞ –¶–µ–Ω–∞: XXX ‚ÇΩ
```

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

**–§–∞–π–ª:** `backend/services/ozon_scraper.py`

**–°—Ç—Ä–æ–∫–∞ 408:**
```python
# –ë—ã–ª–æ:
return f"{self.base_url}/search/?text={quote(article)}"

# –°—Ç–∞–ª–æ:
return f"{self.base_url}/product/{article}/"
```

**–¢–æ–ª—å–∫–æ 1 —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞!** –ù–æ —ç—Ç–æ **–∫—Ä–∏—Ç–∏—á–Ω–æ–µ** –∏–∑–º–µ–Ω–µ–Ω–∏–µ.

---

## –ü–æ—á–µ–º—É v2 –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

v2 –∏–º–µ–ª–∞ –æ—Ç–ª–∏—á–Ω—É—é anti-detection –∑–∞—â–∏—Ç—É, –Ω–æ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL (`/search/`)
- `/search/` **–≤—Å–µ–≥–¥–∞** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403 –¥–ª—è –±–æ—Ç–æ–≤
- –î–∞–∂–µ –∏–¥–µ–∞–ª—å–Ω–∞—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –ø–æ–º–æ–≥–∞–ª–∞

v3 –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç URL ‚Üí –¥–æ–ª–∂–Ω–∞ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å! ‚úÖ

---

## –ò—Å—Ç–æ—Ä–∏—è

- **v1:** –ë–∞–∑–æ–≤–∞—è anti-detection + –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL ‚Üí 403
- **v2:** –£—Å–∏–ª–µ–Ω–Ω–∞—è anti-detection + –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL ‚Üí 403
- **v3:** –£—Å–∏–ª–µ–Ω–Ω–∞—è anti-detection + **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL** ‚Üí 200 ‚úÖ

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [CRITICAL_FIX_v3.md](CRITICAL_FIX_v3.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- [ANTI_DETECTION_IMPROVEMENTS_v2.md](ANTI_DETECTION_IMPROVEMENTS_v2.md) - Anti-detection —Ç–µ—Ö–Ω–∏–∫–∏ (–∞–∫—Ç—É–∞–ª—å–Ω—ã!)
- [READY_TO_DEPLOY_v2.md](READY_TO_DEPLOY_v2.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é

---

**v3 –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å 403! üéØ**
