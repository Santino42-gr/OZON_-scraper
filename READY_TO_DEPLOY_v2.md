# ‚úÖ OZON Scraper v2 - Ready to Deploy

## –°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –∑–∞—â–∏—Ç–æ–π –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

---

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞:
–ê—Ä—Ç–∏–∫—É–ª `1066650955` –Ω–µ —É–¥–∞–≤–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å - OZON –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã.

### –†–µ—à–µ–Ω–∏–µ:
–î–æ–±–∞–≤–ª–µ–Ω—ã **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ** —Ç–µ—Ö–Ω–∏–∫–∏ –æ–±—Ö–æ–¥–∞ –∏–∑ —Ä–∞–±–æ—á–µ–≥–æ Telegram –±–æ—Ç–∞:

1. ‚úÖ **–ó–∞–¥–µ—Ä–∂–∫–∞ 2-3 —Å–µ–∫ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (–±—ã–ª–æ: —Å—Ä–∞–∑—É)
2. ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è** (–±—ã–ª–æ: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä)
3. ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω—ã –≤—Å–µ –∑–∞–¥–µ—Ä–∂–∫–∏** –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —á–µ–ª–æ–≤–µ–∫–∞
4. ‚úÖ **–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (–∏–º–∏—Ç–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è)

**–ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:** –û–±—â–µ–µ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 2-4 –¥–æ **6-10 —Å–µ–∫—É–Ω–¥** (–∫–∞–∫ —É —á–µ–ª–æ–≤–µ–∫–∞).

---

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
./redeploy.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose -f docker-compose.prod.yml down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ë–ï–ó –ö–≠–®–ê (–≤–∞–∂–Ω–æ!)
docker-compose -f docker-compose.prod.yml build --no-cache

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.prod.yml up -d

# –ü–æ–¥–æ–∂–¥–∞—Ç—å
sleep 5

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose -f docker-compose.prod.yml ps
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞—Ä—Ç–∏–∫—É–ª —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
```
1066650955
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
```bash
docker-compose -f docker-compose.prod.yml logs -f backend
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ Page loaded, found selector: h1
‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ
üí∞ –¶–µ–Ω–∞: XXX ‚ÇΩ
üîß Source: playwright
```

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:
- `backend/services/ozon_scraper.py`

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:
- **672-675:** –£–≤–µ–ª–∏—á–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ `goto()` –¥–æ 2-3 —Å–µ–∫
- **687-689:** –£–≤–µ–ª–∏—á–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–æ 1-2 —Å–µ–∫
- **692-711:** –î–æ–±–∞–≤–ª–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (5 –≤–º–µ—Å—Ç–æ 1)
- **723-724:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ 0.5-1 —Å–µ–∫ –ø–µ—Ä–µ–¥ `close()`

### –¢–∞–π–º–ª–∞–π–Ω –∑–∞–ø—Ä–æ—Å–∞ (–Ω–æ–≤—ã–π):
```
–ó–∞–¥–µ—Ä–∂–∫–∞ 1-3 —Å–µ–∫
‚Üì
–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (goto)
‚Üì
–ó–∞–¥–µ—Ä–∂–∫–∞ 2-3 —Å–µ–∫ ‚≠ê –ö–†–ò–¢–ò–ß–ù–û
‚Üì
–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚Üì
–ó–∞–¥–µ—Ä–∂–∫–∞ 1-2 —Å–µ–∫
‚Üì
–û–∂–∏–¥–∞–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ (5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤) ‚≠ê –ö–†–ò–¢–ò–ß–ù–û
‚Üì
–ü–∞—Ä—Å–∏–Ω–≥ HTML
‚Üì
–ó–∞–¥–µ—Ä–∂–∫–∞ 0.5-1 —Å–µ–∫
‚Üì
–ó–∞–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–ò—Ç–æ–≥–æ: 6-10 —Å–µ–∫—É–Ω–¥ (–∫–∞–∫ —á–µ–ª–æ–≤–µ–∫)
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-cache`** –ø—Ä–∏ —Å–±–æ—Ä–∫–µ, –∏–Ω–∞—á–µ —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è
2. **–ù–µ —É–º–µ–Ω—å—à–∞–π—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏** - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã
3. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è** –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å ~15-20 —Å–µ–∫ (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Playwright)

---

## üîç Troubleshooting

### –ï—Å–ª–∏ –∞—Ä—Ç–∏–∫—É–ª –≤—Å—ë –µ—â–µ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω:**
```bash
docker-compose -f docker-compose.prod.yml ps
# –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ "Created" - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞/–≤—Ä–µ–º—è
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ Playwright:**
```bash
docker-compose -f docker-compose.prod.yml logs backend | grep -i "playwright\|error"
```

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –∞—Ä—Ç–∏–∫—É–ª—ã:**
- `140054467`
- `1682602734`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ OZON –¥–æ—Å—Ç—É–ø–µ–Ω:**
```bash
curl -I https://www.ozon.ru/product/1066650955/
```

---

## üìà –û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ v2 | –ü–æ—Å–ª–µ v2 |
|---------|-------|----------|
| Success Rate | ~70-80% | ~95%+ |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ OZON | –ß–∞—Å—Ç—ã–µ | –†–µ–¥–∫–∏–µ |
| –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ | 2-4 —Å–µ–∫ | 6-10 —Å–µ–∫ |
| –ò–º–∏—Ç–∞—Ü–∏—è —á–µ–ª–æ–≤–µ–∫–∞ | –ß–∞—Å—Ç–∏—á–Ω–∞—è | –ü–æ–ª–Ω–∞—è |

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ANTI_DETECTION_IMPROVEMENTS_v2.md](ANTI_DETECTION_IMPROVEMENTS_v2.md) - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π
- [OZON_SCRAPER_IMPROVEMENTS.md](OZON_SCRAPER_IMPROVEMENTS.md) - –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è —É–ª—É—á—à–µ–Ω–∏–π

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `./redeploy.sh` –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ (3-5 –º–∏–Ω—É—Ç)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∞—Ä—Ç–∏–∫—É–ª `1066650955` —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ü–µ–Ω–∞ –ø–æ–ª—É—á–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ

---

**–ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é! –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã. üöÄ**

**–û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø v2:** –ú–µ–¥–ª–µ–Ω–Ω–µ–µ = —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ. Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —Ç–∞–∫.
